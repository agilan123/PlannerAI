<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Week Calendar</title>
    <style>
        /* WeekCalendar.css content */
        .week-calendar {
            display: flex;
            background-color: #333; /* Dark background */
        }

        .time-column, .day-column {
            border-right: 1px solid #555; /* Darker border for separation */
        }

        .time-column {
            flex: 0 0 80px; /* Increase the flex-basis from the original value to 80px */
            display: flex;
            flex-direction: column;
            background-color: #222;
        }

        .hour, .day-label {
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid #555; /* Darker border */
            color: #ddd; /* Lighter text for visibility */
        }

        .day-column {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .hour-marker {
            border-bottom: 1px solid #444; /* Subtle border for hour markers */
            flex-grow: 1;
            cursor: pointer;
        }

        .clicked {
            background-color: #90ee90; /* Light green for selected times */
        }

        .day-label {
            border-bottom: 1px solid #555;
            background-color: #2a2a2a; /* Slightly different background for header */
            font-weight: bold;
        }

        .confirm-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #444; /* Dark button background */
            color: #fff; /* Light text */
            border: none;
            border-radius: 4px; /* Rounded corners */
            transition: background-color 0.3s; /* Smooth transition for hover effect */
        }

        .confirm-button:hover {
            background-color: #555; /* Slightly lighter on hover */
        }
    </style>

</head>
<body>
    <div id="root"></div>

    <!-- React and ReactDOM from CDN for simplicity -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <!-- Babel for JSX processing in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        // Your React component code adapted for direct embedding
        const hours = [...Array(12).keys()].map(hour => `${hour + 1}:00 AM`).concat([...Array(12).keys()].map(hour => `${hour + 1}:00 PM`));
        const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

        function WeekCalendar() {
            const [clicked, setClicked] = React.useState({});
            const [isDragging, setIsDragging] = React.useState(false);

            const generateKey = (dayIndex, hourIndex) => `${dayIndex}-${hourIndex}`;

            const handleMouseDown = (dayIndex, hourIndex) => {
                setIsDragging(true);
                toggleSelection(dayIndex, hourIndex);
            };

            const handleMouseEnter = (dayIndex, hourIndex) => {
                if (!isDragging) return;
                toggleSelection(dayIndex, hourIndex);
            };

            const handleMouseUp = () => {
                setIsDragging(false);
            };

            const toggleSelection = (dayIndex, hourIndex) => {
                const key = generateKey(dayIndex, hourIndex);
                const updatedClicked = { ...clicked, [key]: !clicked[key] };
                setClicked(updatedClicked);
            };

            const generateSelectionArray = () => {
                const selectionArray = days.map((_, dayIndex) => 
                    hours.map((_, hourIndex) => clicked[generateKey(dayIndex, hourIndex)] ? 1 : 0)
                );
                return selectionArray;
            };

            const handleConfirm = () => {
                const selectionArray = generateSelectionArray();
                const json = JSON.stringify(selectionArray);
                const blob = new Blob([json], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'selection.json';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };

            return (
                <div className="week-calendar" onMouseLeave={handleMouseUp}>
                    <div className="time-column">
                        <div className="hour-label"></div>
                        {hours.map(hour => (
                            <div key={hour} className="hour">{hour}</div>
                        ))}
                    </div>
                    {days.map((day, dayIndex) => (
                        <div key={day} className="day-column">
                            <div className="day-label">{day}</div>
                            {hours.map((hour, hourIndex) => (
                                <div 
                                    key={hour} 
                                    className={`hour-marker ${clicked[generateKey(dayIndex, hourIndex)] ? 'clicked' : ''}`} 
                                    onMouseDown={() => handleMouseDown(dayIndex, hourIndex)}
                                    onMouseEnter={() => handleMouseEnter(dayIndex, hourIndex)}
                                    onMouseUp={handleMouseUp}
                                ></div>
                            ))}
                        </div>
                    ))}
                    <button onClick={handleConfirm} className="confirm-button">Confirm</button>
                </div>
            );
        }

        function App() {
            return (
                <div className="App">
                    <WeekCalendar />
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
